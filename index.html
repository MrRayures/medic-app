<!doctype html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
        <meta name="mobile-web-app-capable" content="yes">
        <title>Accueil</title>
        <link rel="manifest" href="manifest.json">
        <link rel="stylesheet" href="./src/assets/css/app.css" />
        <script type="module" src="./src/js/utils.js"></script>
        
    </head>
    <body>
        <button class="add-button c-button c-button--primary">Add to home screen</button>
        <main id="app" class="c-layout"></main>
        <script type="module" src="./src/js/router.js"></script> 
        <script type="module" src="./sw.js"></script> 
        <script>
            let deferredPrompt;
            const addBtn = document.querySelector(".add-button");
            addBtn.style.display = "none";

            window.addEventListener("beforeinstallprompt", (e) => {
                // Prevent Chrome 67 and earlier from automatically showing the prompt
                e.preventDefault();
                // Stash the event so it can be triggered later.
                deferredPrompt = e;
                // Update UI to notify the user they can add to home screen
                addBtn.style.display = "block";

                addBtn.addEventListener("click", (e) => {
                    // hide our user interface that shows our A2HS button
                    addBtn.style.display = "none";
                    // Show the prompt
                    deferredPrompt.prompt();
                    // Wait for the user to respond to the prompt
                    deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === "accepted") {
                        console.log("User accepted the A2HS prompt");
                    } else {
                        console.log("User dismissed the A2HS prompt");
                    }
                    deferredPrompt = null;
                    });
                });
            });
        </script>
    </body>
    
</html>
